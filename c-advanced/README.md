# 発展内容

## math.h を使うときのコンパイル方法
```bash
gcc xxx.c -lm
```
と後ろに `-lm` を追加する。

## ポインタ
### ポインタのポインタの書き方
```c
** p;
```

### ポインタのポインタの利点
- ポインタの状態のチェックなどといったコードを関数内でできることから、ソースコードの中に同じようなコードを何度も書く必要が無いという点。

## 関数ポインタ
### 関数ポインタの書式
```c
型名 (*変数名)(引数)
```
- 037_fuction_pointer2.c を参照のこと。

### 引数内での関数ポインタの書式
```c
型名 (*)(引数)
```
- 037_function_pointer3.c を参照のこと。

### 引数内での関数ポインタを使用する利点
- 関数ポインタは、関数内で呼び出す関数を動的に変更する時に非常に便利。
- 037_function_pointer3.c を参照のこと。

## 構造体と共用体の違い
- 構造体は複数の変数をひとまとめにしたもの。
    - それぞれの変数をメンバーという。
- 共用体は複数あるメンバーのうち、同時に使うことができるのはどれか一つだけ。
    - ここが構造体と共用体の違い。
- 共用体のメモリサイズは、メンバーの中のもっとも大きいものと等しくなっている。
- 共用体を使う理由はメモリの節約。

## 値渡しとポインタ渡しの違い
- 値渡しはコピーを渡す。
    - ので、渡し元のデータは書き換えられない。
- ポインタ渡しはそのデータのアドレスを渡す。
    - ので、渡し元のデータも書き換えられる。

## 文字列関数

| 関数     | 書式                        | 意味                                                        | 使用例                       |
|:---------|:----------------------------|:------------------------------------------------------------|:-----------------------------|
| strcpy() | strcpy(char* s1, char* s2); | 右辺の文字列を左辺の文字列変数にコピーする                  | strcpy(s, "Hello");          |
| strcat() | strcat(char* s1, char* s2); | 右辺の文字列を左辺の文字列変数に追加する                    | strcat(s, "Hello");          |
| strlen() | strlen(char* s);            | ()に文字列を与えると、戻り値として長さを得る                | int l = strlen("Hello");     |
| strcmp() | strcpy(char* s1, char* s2); | 文字列 s1, s2 が等しいと0, 等しくなければそれ以外の値を返す | if(strcmp(s, "Hello") == 0); |
| atoi()   | atoi(char* s);              | 与えられた文字列を整数型に変える                            | int n = atoi("100");         |
| atof()   | atof(char* s);              | 与えられた文字列を実数型に変える                            | double d = atof("3.14");     |

## ファイル読み書き関数

| 関数      | 書式                                                | 意味                                                                       | 使用例                              |
|:----------|:----------------------------------------------------|:---------------------------------------------------------------------------|:------------------------------------|
| fopen()   | fopen(ファイル名, モード);                          | ファイルを指定したモードで開く。戻り値がファイルのポインタ。               | FIEL* fp = open("sample.txt", "w"); |
| fprintf() | fprintf(ファイルポインタ, 書き込み文字, 変数, ...); | 文字列をファイルに書き込む                                                 | fprintf(fp, "no=%d", i);            |
| fclose()  | fclose(ファイルポインタ);                           | 指定したファイルポインタのファイルを閉じる                                 | flose(fp);                          |
| fgets()   | fgets(文字列, 文字列サイズ, ファイルポインタ);      | 指定したサイズの文字列をファイルから読み込む                               | fgets(s, 10, fp);                   |
| fgetc()   | fgetsc(ファイルポインタ);                           | 指定したテキストファイルから1文字読み込む。戻り値が文字コード。EOFが終了。 | c = fgetc(fp);                      |
|fwrite()|fwrite(データ, データのバイト長, データの数, ファイルポインタ);|バイナリデータの書き込み|fwrite(data, sizeof(int), sizeof(data), fp);|
|fread()|fread(データ, データのバイト長, データの数, ファイルポインタ);|バイナリデータの書き込み|fread(data,sizeof(int), sizeof(data), fp);|
|fseek()|freek(ファイルポインタ, 移動バイト数, 開始位置);|ファイルを開始位置から、移動バイト数移動する|fseek(fp, 0L, SEEK_END);|
|ftell()|ftell(ファイルポインタ);|現在のファイル位置の値をバイト数で返す|ftell(fp);|

- feek はテキストファイル、バイナリファイルの両方で使える。

### fopen() 関数のモード

| モード    | 機能                                                         | ファイルが存在しないとき |
|:----------|:-------------------------------------------------------------|:-------------------------|
| r         | テキストデータの読み込み                                     | エラーになる             |
| w         | テキストデータの書き込み                                     | ファイルを新規作成する   |
| a         | テキストデータへの追加書き込み                               | ファイルを新規作成する   |
| r+        | テキストデータを更新モードで開く（書き込み・読み込み共に可） | エラーになる             |
| w+        | テキストデータを更新モードで開く（書き込み・読み込み共に可） | ファイルを新規作成する   |
| a+        | テキストデータを更新モードで開く（書き込み・読み込み共に可） | ファイルを新規作成する   |
| rb        | バイナリデータの読み込み                                     | エラーになる             |
| wb        | バイナリデータの書き込み                                     | ファイルを新規作成する   |
| ab        | バイナリデータへの追加書き込み                               | ファイルを新規作成する   |
| rb+ / r+b | バイナリデータを更新モードで開く（書き込み・読み込み共に可） | エラーになる             |
| wb+ / w+b | バイナリデータを更新モードで開く（書き込み・読み込み共に可） | ファイルを新規作成する   |
| ab+ / a+b | バイナリデータを更新モードで開く（書き込み・読み込み共に可） | ファイルを新規作成する   |

### fseek() 関数で用いられる開始位置

| 開始位置の定数 | 意味               |
|:---------------|:-------------------|
| SEEK_SET       | ファイルの先頭     |
| SEEK_CUR       | ファイルの現在位置 |
| SEEK_END       | ファイルの終端     |

## static 変数
- 呼び出しのたびに初期化されない変数。
- グローバル変数と同じ領域の静的領域に記録される。
- 外部から extern でアクセスできない変数。
